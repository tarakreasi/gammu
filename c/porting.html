<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Porting from libGammu older than 1.12.0 &mdash; Gammu 1.42.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Gammu internals" href="../internal/index.html" />
    <link rel="prev" title="WAP" href="wap.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Gammu
          </a>
              <div class="version">
                1.42.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../project/index.html">Gammu project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick/index.html">Quick starter guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">python-gammu</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">libGammu</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="hints.html">Hints for libGammu Novices</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html">libGammu C API</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Porting from libGammu older than 1.12.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#rationale-for-api-change">Rationale for API change</a></li>
<li class="toctree-l3"><a class="reference internal" href="#changes-you-have-to-do-in-your-code">Changes you have to do in your code</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../internal/index.html">Gammu internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../formats/index.html">File formats used by Gammu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config/index.html">Gammu Configuration File</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gammu/index.html">Gammu Utility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../smsd/index.html">SMS Daemon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils/index.html">Miscellaneous utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/index.html">Testing Gammu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocol/index.html">Phone Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Gammu</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">libGammu</a></li>
      <li class="breadcrumb-item active">Porting from libGammu older than 1.12.0</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/c/porting.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="porting-from-libgammu-older-than-1-12-0">
<h1>Porting from libGammu older than 1.12.0<a class="headerlink" href="#porting-from-libgammu-older-than-1-12-0" title="Permalink to this heading"></a></h1>
<section id="rationale-for-api-change">
<h2>Rationale for API change<a class="headerlink" href="#rationale-for-api-change" title="Permalink to this heading"></a></h2>
<p>This document describes what you have to change in your code, if you
used Gammu older than 1.12.0. This release came with huge changes to
API, which has to be done for various reasons:</p>
<ul class="simple">
<li><p>ABI stability. - Till now almost every change in internals of any
driver lead to ABI change. If we would correctly increase soname on
each ABI change, we would be somewhere near 200, what is not something
we could be proud of.</p></li>
<li><p>Centralisation of variables cleanup. - Currently all phone drivers
have to do some common things in each function. New API allows one to
centralize those operations in one place.</p></li>
<li><p>Exposing of internals. - Old API exposed too much of Gammu internals,
what could be misused by programmers and could lead to unexpected
behaviour when some internals are changed.</p></li>
</ul>
</section>
<section id="changes-you-have-to-do-in-your-code">
<h2>Changes you have to do in your code<a class="headerlink" href="#changes-you-have-to-do-in-your-code" title="Permalink to this heading"></a></h2>
<p>Below examples expect <code class="docutils literal notranslate"><span class="pre">sm</span></code> to be state machine structure in your current
code, change it to appropriate variable name if it differs.</p>
<ol class="arabic simple">
<li><p>Use pointer to <a class="reference internal" href="statemachine.html#c.GSM_StateMachine" title="GSM_StateMachine"><code class="xref c c-type docutils literal notranslate"><span class="pre">GSM_StateMachine</span></code></a> instead of it. API now do not expose
this structure, so you will get compiler error. You should allocate
this pointer by <code class="xref c c-func docutils literal notranslate"><span class="pre">GSM_AllocStateMachine()</span></code> and free by
<code class="xref c c-func docutils literal notranslate"><span class="pre">GSM_FreeStateMachine()</span></code>.</p></li>
<li><p>Change all phone functions from <code class="docutils literal notranslate"><span class="pre">sm.Phone.Functions-&gt;SomeFunction</span></code> to
<code class="docutils literal notranslate"><span class="pre">GSM_SomeFunction</span></code>. Only functions which results were stored inside
state machine structure have changed signature to include results of
the operation.</p></li>
<li><p>All callbacks are set by function <code class="docutils literal notranslate"><span class="pre">GSM_Set*Callback</span></code> instead of
directly accessing structure.</p></li>
<li><p>Some function have been renamed to follow <code class="docutils literal notranslate"><span class="pre">GSM_*</span></code> naming conventions.</p></li>
</ol>
<p>As there might be some functions still missing from new API, don’t
hesitate to contact author or ask on mailing list if you miss something.</p>
<p>API documentation can be generated using Doxygen (make apidoc in build
tree) or Sphinx and is part of this manual.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="index.html#libgammu"><span class="std std-ref">libGammu</span></a></p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="wap.html" class="btn btn-neutral float-left" title="WAP" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../internal/index.html" class="btn btn-neutral float-right" title="Gammu internals" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2009-2015, Michal Čihař &lt;michal@cihar.com&gt;.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>